<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Efficient Bitruss Decomposition On GPU: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Efficient Bitruss Decomposition On GPU
   </div>
   <div id="projectbrief">Bitruss Decomposition On GPU</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Efficient Bitruss Decomposition On GPU Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <img src="https://img.shields.io/badge/make-4.3-brightgreen.svg" alt="make" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/cmake-3.22.1-brightgreen.svg" alt="cmake" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/C++-11.4.0-blue.svg" alt="C++" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/CUDA-12.2-blue.svg" alt="nvcc" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/build-passing-brightgreen.svg" alt="Build Status" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/platform-Linux-lightgrey.svg" alt="Platform" style="pointer-events: none;" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md0"></a>
Bitruss Decomposition On GPU</h1>
<h2><a class="anchor" id="autotoc_md1"></a>
Prerequisites</h2>
<ul>
<li>CMake 3.22 or higher</li>
<li>NVIDIA CUDA Toolkit 12.2 or higher</li>
<li>A CUDA-capable GPU device</li>
</ul>
<h2><a class="anchor" id="autotoc_md2"></a>
Build from Source</h2>
<p>To build the GPU bitruss code, execute the following commands in your terminal: </p><div class="fragment"><div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake -DCMAKE_BUILD_TYPE=Release .. &amp;&amp; cmake --build . &amp;&amp; make</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3"></a>
CMake Configuration</h2>
<p>For a better performance, you need to change the <code>set(CMAKE_CUDA_ARCHITECTURES 86)</code> in <code>CMakeLists.txt</code> file. The value of <code>CMAKE_CUDA_ARCHITECTURES</code> can be obtained from the output of GPU device info (Compute Capability): </p><div class="fragment"><div class="line">./coh --device 0 --device_info</div>
<div class="line">----------------------------------------------------------------</div>
<div class="line">|            Property             |            Info            |</div>
<div class="line">----------------------------------------------------------------</div>
<div class="line">...</div>
<div class="line">| Compute Capability              | 86                         |</div>
<div class="line">...</div>
<div class="line">----------------------------------------------------------------</div>
</div><!-- fragment --><p> Set the appropriate <code>CMAKE_CUDA_ARCHITECTURES</code> according to the output, then rebuild the code.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Usage</h2>
<div class="fragment"><div class="line">&gt; ./coh --help                                            </div>
<div class="line">Usage: bitruss [--help] [--version] [--device VAR] [--device_info] [--graph VAR] [--bin VAR] [--cpu] [--gpu] [--algo VAR] [--threads VAR]</div>
<div class="line"> </div>
<div class="line">Optional arguments:</div>
<div class="line">  -h, --help     shows help message and exits </div>
<div class="line">  -v, --version  prints version information and exits </div>
<div class="line">  --device       GPU Device ID (must be a positive integer) [nargs=0..1] [default: 0]</div>
<div class="line">  --device_info  Display GPU device properties </div>
<div class="line">  --graph        Graph file path [nargs=0..1] [default: &quot;/&quot;]</div>
<div class="line">  --bin          Output binary file path </div>
<div class="line">  --cpu          Run CPU algorithms </div>
<div class="line">  --gpu          Run GPU algorithms </div>
<div class="line">  --algo         Algorithm to run including: bfc, hidx, msp [nargs=0..1] [default: &quot;msp&quot;]</div>
<div class="line">  --threads      Number of threads (must be a positive integer) [nargs=0..1] [default: 1]</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md5"></a>
Algorithms</h3>
<p>The table below details the commands for running different algorithms on CPU and GPU:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone">Butterfly counting   </th><th class="markdownTableHeadNone">Butterfly support counting   </th><th class="markdownTableHeadNone">h-index bitruss   </th><th class="markdownTableHeadNone">GBiD    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CPU   </td><td class="markdownTableBodyNone">&ndash;cpu &ndash;algo bfc   </td><td class="markdownTableBodyNone">&ndash;cpu &ndash;algo ebfc   </td><td class="markdownTableBodyNone">&ndash;cpu &ndash;algo hidx   </td><td class="markdownTableBodyNone">&ndash;cpu &ndash;algo msp    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">GPU   </td><td class="markdownTableBodyNone">&ndash;gpu &ndash;algo bfc   </td><td class="markdownTableBodyNone">&ndash;gpu &ndash;algo ebfc   </td><td class="markdownTableBodyNone">&ndash;gpu &ndash;algo hidx   </td><td class="markdownTableBodyNone">&ndash;gpu &ndash;algo msp   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md6"></a>
Convert graph to binary file</h2>
<p>The command <b>only supports standard bipartite graphs</b> and does not support temporal or multilayer bipartite graphs. For other types of bipartite graphs, they must be converted to standard bipartite graphs before running the algorithm.</p>
<h3><a class="anchor" id="autotoc_md7"></a>
Basic Conversion Command</h3>
<div class="fragment"><div class="line">./coh --graph data/aw.graph --bin data/aw.bin</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md8"></a>
Using Datasets from KONECT</h3>
<p>If you download the dataset from <a href="http://konect.cc/">http://konect.cc/</a>, you can use the following command to convert the graph file to binary file: </p><div class="fragment"><div class="line">./coh --graph out.xxxxx --bin xxx.bin</div>
</div><!-- fragment --><p> Note that, the graph file downloaded from <a href="http://konect.cc/">http://konect.cc/</a> is named as <code>out.xxxxx</code>. For example, you can download the <a href="http://konect.cc/files/download.tsv.brunson_south-africa.tar.bz2">SC</a> dataset, after decompressing the file, you can convert the graph file to binary file: </p><div class="fragment"><div class="line">./coh --graph brunson_south-africa/out.brunson_south-africa_south-africa --bin sc.bin</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md9"></a>
Examples</h2>
<p>Converting the graph file to binary file: </p><div class="fragment"><div class="line">./coh --graph data/aw.graph --bin data/aw.bin</div>
</div><!-- fragment --><p>Running the bitruss algorithm on GPU: </p><div class="fragment"><div class="line">./coh --gpu --device 0 --algo msp --graph data/aw.bin</div>
</div><!-- fragment --><p>Running the bitruss algorithm on CPU: </p><div class="fragment"><div class="line">./coh --cpu --threads 32 --algo msp --graph data/aw.bin</div>
</div><!-- fragment --><p>Running the butterfly support counting algorithm on GPU: </p><div class="fragment"><div class="line">./coh --gpu --device 0 --algo ebfc --graph data/aw.bin</div>
</div><!-- fragment --><p>Running the butterfly counting algorithm on GPU: </p><div class="fragment"><div class="line">./coh --gpu --device 0 --algo bfc --graph data/aw.bin</div>
</div><!-- fragment --><p><b>&ndash;device 0</b> denotes the GPU device ID, you can change it to other GPU device ID.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
Run with Docker</h2>
<p>Use the following commands to build and run your Docker container, ensuring that it utilizes the GPU capabilities: </p><div class="fragment"><div class="line">docker build -t bitruss .</div>
<div class="line">docker run -it --gpus all bitruss</div>
</div><!-- fragment --><p> If you have the following error: </p><blockquote class="doxtable">
<p>docker: Error response from daemon: could not select device driver "" with capabilities: [[gpu]]. </p>
</blockquote>
<p>ERRO[0000] error waiting for container: context canceled</p>
<p>you can execute the following command to solve this issue: </p><div class="fragment"><div class="line">sudo apt install -y nvidia-docker2 </div>
<div class="line">sudo systemctl daemon-reload</div>
<div class="line">sudo systemctl restart docker</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
